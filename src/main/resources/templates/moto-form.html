<!DOCTYPE html>
<html lang="pt-br"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="~{fragments :: head(#{register})}"></head>

<body class="min-h-screen flex flex-col">
<header th:replace="~{fragments :: navbar}"></header>

<main class="p-6 max-w-xl mx-auto w-full flex-1">
    <h1 class="text-2xl font-bold text-green-800 mb-4"
        th:text="${moto.id} != null ? #{edit.moto} : #{new.moto}">
        Nova moto
    </h1>

    <form th:action="@{/motos/html/form}" th:object="${moto}" method="post"
          class="space-y-4 bg-white p-6 rounded shadow">

        <!-- CSRF (evita 403) -->
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

        <input type="hidden" th:field="*{id}"/>

        <!-- MODELO -->
        <div>
            <label class="block text-sm font-medium text-gray-700" th:text="#{model}">Modelo</label>
            <input type="text" th:field="*{modelo}" th:errorclass="input-error" class="input input-bordered w-full"/>
            <p class="text-sm text-error" th:errors="*{modelo}"></p>
        </div>

        <!-- PLACA -->
        <div>
            <label class="block text-sm font-medium text-gray-700" th:text="#{plate}">Placa</label>
            <input type="text" th:field="*{placa}" th:errorclass="input-error" class="input input-bordered w-full"/>
            <p class="text-sm text-error" th:errors="*{placa}"></p>
        </div>

        <!-- STATUS -->
        <div>
            <label class="block text-sm font-medium text-gray-700" th:text="#{status}">Status</label>
            <select th:field="*{status}" th:errorclass="select-error" class="select select-bordered w-full">
                <option value="">Selecione...</option>
                <option value="DISPONIVEL" th:text="#{available}">Disponível</option>
                <option value="ALUGADA" th:text="#{rented}">Alugada</option>
                <option value="MANUTENCAO" th:text="#{maintenance}">Manutenção</option>
            </select>
            <p class="text-sm text-error" th:errors="*{status}"></p>
        </div>
        <div>
            <label class="block text-sm font-medium">Pátio</label>
            <select th:field="*{patioId}" class="select select-bordered w-full" th:errorclass="select-error" id="patioSelect">
                <option value="">Selecione...</option>
                <option th:each="p : ${patios}" th:value="${p.id}" th:text="${p.nome}"></option>
            </select>
            <p class="text-sm text-error" th:errors="*{patioId}"></p>
        </div>

        <!-- ZONA (opcional) -->
        <div>
            <label class="block text-sm font-medium">Zona</label>
            <select th:field="*{zonaId}" class="select select-bordered w-full" th:errorclass="select-error" id="zonaSelect">
                <option value="">Sem zona</option>
                <option th:each="z : ${zonas}" th:value="${z.id}" th:text="${z.nome}"></option>
            </select>
            <p class="text-sm text-error" th:errors="*{zonaId}"></p>
        </div>

        <!-- BOTÕES -->
        <div class="flex justify-between">
            <button class="btn btn-success" type="submit" th:text="#{save}">Salvar</button>
            <a href="/motos/html" class="btn btn-ghost" th:text="#{cancel}">Cancelar</a>
        </div>

    </form>
</main>

<footer th:replace="~{fragments :: footer}"></footer>
</body>
</html>
